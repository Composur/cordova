(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fccfcf4"],{3487:function(t,o,s){"use strict";var e=s("bdae"),i=s.n(e);i.a},5290:function(t,o,s){"use strict";var e=s("6af8"),i=s.n(e);i.a},"6af8":function(t,o,s){},"86d8":function(t,o,s){"use strict";s.r(o);var e=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",[s("div",{staticClass:"goods"},[s("div",{staticClass:"menu-wrapper"},[s("ul",t._l(t.goods,(function(o,e){return s("li",{key:e,staticClass:"menu-item",class:{current:e===t.currentIndex},on:{click:function(o){return t.clickMenuItem(e)}}},[s("span",{staticClass:"text bottom-border-1px"},[o.icon?s("img",{staticClass:"icon",attrs:{src:o.icon}}):t._e(),t._v(" "+t._s(o.name)+" ")])])})),0)]),s("div",{staticClass:"foods-wrapper"},[s("ul",{ref:"foodsUl"},t._l(t.goods,(function(o,e){return s("li",{key:e,staticClass:"food-list-hook"},[s("h1",{staticClass:"title"},[t._v(t._s(o.name))]),s("ul",t._l(o.foods,(function(o,e){return s("li",{key:e,staticClass:"food-item bottom-border-1px",on:{click:function(s){return t.showFood(o)}}},[s("div",{staticClass:"icon"}),s("div",{staticClass:"content"},[s("h2",{staticClass:"name"},[t._v(t._s(o.name))]),s("p",{staticClass:"desc"},[t._v(t._s(o.description))]),s("div",{staticClass:"extra"},[s("span",{staticClass:"count"},[t._v("月售"+t._s(o.sellCount)+"份")]),s("span",[t._v("好评率"+t._s(o.rating)+"%")])]),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(o.price))]),o.oldPrice?s("span",{staticClass:"old"},[t._v("￥"+t._s(o.oldPrice))]):t._e()]),s("div",{staticClass:"cartcontrol-wrapper"},[s("CartControl",{attrs:{food:o}})],1)])])})),0)])})),0)]),s("ShopCart")],1),s("Food",{ref:"food",attrs:{food:t.food}})],1)},i=[],n=(s("a4d3"),s("4de4"),s("c740"),s("fb6a"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),c=s("1fba"),r=s("2f62"),a=s("0a59"),l=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"cartcontrol"},[s("transition",{attrs:{name:"move"}},[t.food.count?s("div",{staticClass:"iconfont icon-remove_circle_outline  iconremovecircleoutline",on:{click:function(o){return o.stopPropagation(),t.updateFoodCount(!1)}}}):t._e()]),t.food.count?s("div",{staticClass:"cart-count"},[t._v(t._s(t.food.count))]):t._e(),s("div",{staticClass:"iconfont icon-add_circle iconadd-circle",on:{click:function(o){return o.stopPropagation(),t.updateFoodCount(!0)}}})],1)},d=[];function f(t,o){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);o&&(e=e.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),s.push.apply(s,e)}return s}function u(t){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?f(Object(s),!0).forEach((function(o){Object(n["a"])(t,o,s[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(s,o))}))}return t}var p={props:{food:Object},methods:u({},Object(r["b"])([a["n"]]),{updateFoodCount:function(t){this[a["n"]]({isAdd:t,food:this.food})}})},h=p,v=(s("e77e"),s("2877")),b=Object(v["a"])(h,l,d,!1,null,null,null),C=b.exports,w=function(){var t=this,o=t.$createElement,s=t._self._c||o;return t.isShow?s("div",{staticClass:"food"},[s("div",{staticClass:"food-content"},[s("div",{staticClass:"image-header"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.food.image,expression:"food.image"}]}),s("p",{staticClass:"foodpanel-desc"},[t._v(t._s(t.food.info))]),s("div",{staticClass:"back",on:{click:t.toggleShow}},[s("i",{staticClass:"iconfont icon-arrow_left iconback"})])]),s("div",{staticClass:"content"},[s("h1",{staticClass:"title"},[t._v(t._s(t.food.name))]),s("div",{staticClass:"detail"},[s("span",{staticClass:"sell-count"},[t._v("月售"+t._s(t.food.sellCount)+"份")]),s("span",{staticClass:"rating"},[t._v("好评率"+t._s(t.food.rating)+"%")])]),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(t.food.price))]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.food.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(t.food.oldPrice))])]),s("div",{staticClass:"cartcontrol-wrapper"},[s("CartControl",{attrs:{food:t.food}})],1)])]),s("div",{staticClass:"food-cover",on:{click:t.toggleShow}})]):t._e()},_=[],g={props:{food:Object},data:function(){return{isShow:!1}},methods:{toggleShow:function(){this.isShow=!this.isShow}},components:{CartControl:C}},m=g,O=(s("5290"),Object(v["a"])(m,w,_,!1,null,"7eb62332",null)),y=O.exports,j=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",[s("div",{staticClass:"shopcart"},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-left",on:{click:t.toggleShow}},[s("div",{staticClass:"logo-wrapper"},[s("div",{staticClass:"logo",class:{highlight:t.totalCount}},[s("i",{staticClass:"iconfont icon-shopping_cart iconicon-test",class:{highlight:t.totalCount}})]),t.totalCount?s("div",{staticClass:"num"},[t._v(t._s(t.totalCount))]):t._e()]),s("div",{staticClass:"price",class:{highlight:t.totalCount}},[t._v("￥"+t._s(t.totalPrice))]),s("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.info.deliveryPrice)+"元")])]),s("div",{staticClass:"content-right"},[s("div",{staticClass:"pay",class:t.payClass},[t._v(" "+t._s(t.payText)+" ")])])]),s("transition",{attrs:{name:"move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[s("div",{staticClass:"list-header"},[s("h1",{staticClass:"title"},[t._v("购物车")]),s("span",{staticClass:"empty",on:{click:t.clearCart}},[t._v("清空")])]),s("div",{staticClass:"list-content"},[s("ul",t._l(t.cartFoods,(function(o,e){return s("li",{key:e,staticClass:"food"},[s("span",{staticClass:"name"},[t._v(t._s(o.name))]),s("div",{staticClass:"price"},[s("span",[t._v("￥"+t._s(o.price))])]),s("div",{staticClass:"cartcontrol-wrapper"},[s("CartControl",{attrs:{food:o}})],1)])})),0)])])])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"list-mask",on:{click:t.toggleShow}})])},P=[],S=(s("b6ce"),s("5441")),k=s.n(S);function x(t,o){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);o&&(e=e.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),s.push.apply(s,e)}return s}function E(t){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?x(Object(s),!0).forEach((function(o){Object(n["a"])(t,o,s[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):x(Object(s)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(s,o))}))}return t}var D={data:function(){return{isShow:!1}},computed:E({},Object(r["d"])(["cartFoods","foodLists","foodInfo"]),{info:function(){return this.foodInfo}},Object(r["c"])(["totalCount","totalPrice"]),{payClass:function(){var t=this.totalPrice,o=this.info.minPrice;return t>=o?"enough":"not-enough"},payText:function(){var t=this.totalPrice,o=this.info.minPrice;return 0===t?"￥".concat(o,"元起送"):t<o?"还差￥".concat(o-t,"元起送"):"结算"},listShow:function(){var t=this;return 0===this.totalCount?(this.isShow=!1,!1):(this.isShow&&this.$nextTick((function(){t.scroll?t.scroll.refresh():t.scroll=new c["a"](".list-content",{click:!0})})),this.isShow)}}),methods:E({},Object(r["b"])([a["a"]]),{toggleShow:function(){this.totalCount>0&&(this.isShow=!this.isShow)},clearCart:function(){var t=this;k.a.confirm("确定清空购物车吗?").then((function(o){t[a["a"]]()}),(function(){}))}}),components:{CartControl:C}},I=D,F=(s("bdb2"),Object(v["a"])(I,j,P,!1,null,"bae00e6a",null)),A=F.exports;function T(t,o){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);o&&(e=e.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),s.push.apply(s,e)}return s}function $(t){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?T(Object(s),!0).forEach((function(o){Object(n["a"])(t,o,s[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(s,o))}))}return t}var M={data:function(){return{scrollY:0,tops:[],food:{},show:!1}},mounted:function(){this[a["e"]]()},computed:$({},Object(r["d"])(["foodLists"]),{goods:function(){return this.foodLists},currentIndex:function(){var t=this.scrollY,o=this.tops,s=o.findIndex((function(s,e){return t>=s&&t<o[e+1]}));return s}}),methods:$({},Object(r["b"])([a["e"]]),{_initScroll:function(){var t=this;new c["a"](".menu-wrapper",{click:!0}),this.foodsScroll=new c["a"](".foods-wrapper",{probeType:2,click:!0}),this.foodsScroll.on("scroll",(function(o){o.x;var s=o.y;t.scrollY=Math.abs(s)})),this.foodsScroll.on("scrollEnd",(function(o){o.x;var s=o.y;t.scrollY=Math.abs(s)}))},_initTops:function(){var t=[],o=0;t.push(o);var s=this.$refs.foodsUl.getElementsByClassName("food-list-hook");Array.prototype.slice.call(s).forEach((function(s){o+=s.clientHeight,t.push(o)})),this.tops=t},clickMenuItem:function(t){var o=this.tops[t];this.scrollY=o,this.foodsScroll.scrollTo(0,-o,300)},showFood:function(t){this.food=t,this.$refs.food.toggleShow()}}),watch:{goods:function(){var t=this;this.$nextTick((function(){t._initScroll(),t._initTops()}))}},components:{CartControl:C,Food:y,ShopCart:A}},N=M,Y=(s("3487"),Object(v["a"])(N,e,i,!1,null,null,null));o["default"]=Y.exports},bdae:function(t,o,s){},bdb2:function(t,o,s){"use strict";var e=s("ee99"),i=s.n(e);i.a},c740:function(t,o,s){"use strict";var e=s("23e7"),i=s("b727").findIndex,n=s("44d2"),c="findIndex",r=!0;c in[]&&Array(1)[c]((function(){r=!1})),e({target:"Array",proto:!0,forced:r},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(c)},e5e9:function(t,o,s){},e77e:function(t,o,s){"use strict";var e=s("e5e9"),i=s.n(e);i.a},ee99:function(t,o,s){},fb6a:function(t,o,s){"use strict";var e=s("23e7"),i=s("861d"),n=s("e8b5"),c=s("23cb"),r=s("50c4"),a=s("fc6a"),l=s("8418"),d=s("1dde"),f=s("b622"),u=f("species"),p=[].slice,h=Math.max;e({target:"Array",proto:!0,forced:!d("slice")},{slice:function(t,o){var s,e,d,f=a(this),v=r(f.length),b=c(t,v),C=c(void 0===o?v:o,v);if(n(f)&&(s=f.constructor,"function"!=typeof s||s!==Array&&!n(s.prototype)?i(s)&&(s=s[u],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return p.call(f,b,C);for(e=new(void 0===s?Array:s)(h(C-b,0)),d=0;b<C;b++,d++)b in f&&l(e,d,f[b]);return e.length=d,e}})}}]);
//# sourceMappingURL=chunk-2fccfcf4.7f60c1a6.js.map